<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>[ì¿¨íƒ€ì´ë“œ MBTI] ì´ë¶ˆì´ ë‚˜ë³´ë‹¤ ì„±ê²©ì´ í™•ì‹¤í•˜ë„¤?</title>
  <link rel="stylesheet" href="style/page.css" />
  <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css" />
  <style>
    body.fade-out {
      opacity: 0;
      transition: opacity 0.4s ease;
    }
  </style>
</head>
<body>
  <div id="start-screen" class="start-screen">
    <img src="./assets/img/start_background.jpg" class="start-bg" alt="ì‹œì‘ ë°°ê²½" />
    <button class="start-btn" id="start-btn" type="button" aria-label="MBTI í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°">MBTI í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°</button>
  </div>
  <div class="container">
    <div class="progress-bar"><div id="progress" class="progress"></div></div>
    <div class="question-box" id="question-box"></div>
    <div class="options" id="options-box"></div>
    <button class="back-button" id="back-button" style="display:none;" type="button" aria-label="ì´ì „ ì§ˆë¬¸ìœ¼ë¡œ">â† ì´ì „</button>
  </div>
  <div class="logo">
    <img src="https://ecimg.cafe24img.com/pg283b14366217017/eleanorco/web/upload/category/editor/2024/03/25/05dc5d6b4907ecd12de9df665366c49e.png" alt="ë¡œê³ ">
  </div>

  <script>
    const questions = [
      {
        question: `Q1. ì˜¤ëŠ˜ í•˜ë£¨ ë! ì§‘ ë„ì°©í•˜ìë§ˆì ë‚´ê°€ ì°¾ëŠ” ê±´?`,
        options: [
          { text: "ì•„ë¬´ë„ ì—†ëŠ” ë°©, ì¡°ìš©í•œ ê³µê¸°, ì‹œì›í•œ ì´ë¶ˆ. ê·¸ëƒ¥â€¦ ì‰¼.", types: ["EN", "IN"] },
          { text: "ì¹˜í‚¨ ëœ¯ê³  ğŸ— ë§¥ì£¼ í•œ ëª¨ê¸ˆğŸº ì—ì–´ì»¨ ë°”ëŒ ì¬ë©´ì„œ ë„·í”Œë¦­ìŠ¤ ì¼œê¸°", types: ["ES", "EN"] },
          { text: "ì˜¤ëŠ˜ë„ ê³ ìƒí–ˆì–´ ë‚˜ì•¼â€¦ ê±°ìš¸ ì• ì…€ì¹´ë¡œ í•˜ë£¨ ë§ˆë¬´ë¦¬âœ¨", types: ["IS"] }
        ]
      },
      {
        question: `Q2. ì—´ëŒ€ì•¼ ì†, ì´ë¶ˆì€ ì–´ë–»ê²Œ ì¨ì•¼ ì œë§›?`,
        options: [
          { text: "ë‹¤ë¦¬ í•œ ìª½ë§Œ ì™~ ì´ë¶ˆê³¼ ë‚˜ì˜ ê±°ë¦¬ë‘ê¸°", types: ["ES", "EN"] },
          { text: "ë°°ë§Œ ë”± ë®ìœ¼ë©´ ì•ˆì •ê° + ì‹œì›í•¨ ì™„ì„±", types: ["IS"] },
          { text: "ì—¬ë¦„ì´ì–´ë„ ì´ë¶ˆì€ í¬ê·¼í•´ì•¼ ì ì´ ì˜´. ë¬´ì¡°ê±´ ë³´ë“¤ë³´ë“¤!", types: ["IN", "IS"] }
        ]
      },
      {
        question: `Q3. ì—¬ë¦„ì— ì§€ì¹œ ë‚ , ë‚˜ë§Œì˜ ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œë²•ì€?`,
        options: [
          { text: "ì‹œì›í•œ ë¬¼ë¡œ ìƒ¤ì›Œ í›„ ì¹¨ëŒ€ì— í’ë©. ê·¸ê²Œ ë°”ë¡œ íë§ì´ì§€", types: ["EN"] },
          { text: "ì§‘ ë°–ì€ ìœ„í—˜í•´â€¦ ë°©ì½•í•˜ë©´ì„œ í‘¹ ìëŠ” ê²Œ ìµœê³ ", types: ["EN"] },
          { text: "ë¬¼ë†€ì´, ì—¬í–‰, ë°”ë‹·ë°”ëŒ! ì‹ ë‚˜ê²Œ ë›°ì–´ë†€ê¸°ë¶€í„° ì‹œì‘!", types: ["IS", "ES"] }
        ]
      },
      {
        question: `Q4. ì—ì–´ì»¨ê³¼ ë‚˜ì˜ ê±°ë¦¬ê°ì€?`,
        options: [
          { text: "ë¦¬ëª¨ì»¨ì€ ë‚´ ì†ì— í•­ìƒ ìˆìŒ. ë¯¸ì„¸ ì¡°ì •ê¹Œì§€ ì™„ë²½í•˜ê²Œ!", types: ["EN", "ES"] },
          { text: "ì§í’ì€ ì‹«ì–´â€¦ ë²½ íƒ€ê³  ì˜¤ëŠ” ê°„ì ‘ë°”ëŒì´ ì§„ì§œ ì°ì´ì§€", types: ["IN"] },
          { text: "ì„ í’ê¸° ë°”ëŒì´ ë” ì¢‹ì•„. ë¶€ë“œëŸ½ê³  ì¡°ìš©í•´ì„œ", types: ["IS", "IN"] }
        ]
      },
      {
        question: `Q5. ì„¸íƒ ëë‚¸ ì´ë¶ˆ ë‹¤ì‹œ ê¹”ì•˜ì„ ë•Œ ë“œëŠ” ìƒê°ì€?`,
        options: [
          { text: "ì™€.. ë‚˜ ì¢€ ë©‹ì§„ë°? ë°©ì´ ìƒˆì§‘ ê°™ì•„", types: ["IS", "ES"] },
          { text: "ë°”ë¡œ ì–¼êµ´ íŒŒë¬»ê¸°! ì´ í–¥ê¸°, ì´ ë³´ì†¡í•¨.. ë¯¸ì³¤ë‹¤", types: ["IN"] },
          { text: "ì–´ì°¨í”¼ ë˜ ê¸ˆë°© ë”ëŸ¬ì›Œì§ˆ ê±´ë°â€¦ ê°í¥ 1ë„ ì—†ìŒ", types: ["EN", "ES"] }
        ]
      },
      {
        question: `Q6. ì¹¨ëŒ€ì— ëˆ„ìš´ ìˆœê°„, 3ì´ˆ ì•ˆì— ìŠ¤ì¹˜ëŠ” ìƒê°ì€?`,
        options: [
          { text: "í° ì¶©ì „ ì•ˆ ê½‚ì•˜ë„¤â€¦ ê·¼ë° ê·€ì°®ì•„ì„œ ê·¸ëƒ¥ ëˆ„ì›€", types: ["EN"] },
          { text: "ì´ë¶ˆ ì† = ì„¸ìƒì—ì„œ ì œì¼ ì•ˆì „í•œ ê³µê°„", types: ["IN", "IS"] },
          { text: "ì‡¼ì¸  í•œ í¸ë§Œ ë³´ìâ€¦ í•˜ë‹¤ê°€ ë²Œì¨ ìƒˆë²½ 2ì‹œ", types: ["ES"] }
        ]
      }
    ];

    let current = 0;
    const score = { EN: 0, IN: 0, ES: 0, IS: 0 };
    const answers = [];

    function updateProgress() {
      const progress = document.getElementById("progress");
      const percent = (current / questions.length) * 100;
      progress.style.width = percent + "%";
    }

    function recalculateScore() {
      score.EN = score.IN = score.ES = score.IS = 0;
      answers.forEach(typeList => {
        typeList.forEach(type => {
          if (score.hasOwnProperty(type)) {
            score[type]++;
          }
        });
      });
    }

    window.onload = () => {
      document.getElementById('start-screen').classList.add('fade-in');
    };

    document.getElementById('start-btn').onclick = () => {
      const startScreen = document.getElementById('start-screen');
      const startBtn = document.getElementById('start-btn');
      startBtn.disabled = true;
      startScreen.classList.remove('fade-in');
      void startScreen.offsetWidth;
      startScreen.classList.add('fade-out');

      setTimeout(() => {
        startScreen.style.display = 'none';
        showQuestion();
      }, 400);
    };

    function showQuestion() {
      const q = questions[current];
      const questionBox = document.getElementById("question-box");
      const optionsBox = document.getElementById("options-box");
      const backBtn = document.getElementById("back-button");

      questionBox.className = "question-box fade-in";
      optionsBox.className = "options fade-in";
      backBtn.classList.remove("fade-out");
      backBtn.classList.add("fade-in");

      questionBox.innerText = q.question;
      optionsBox.innerHTML = "";

      q.options.forEach(opt => {
        const btn = document.createElement("button");
        btn.innerText = opt.text;
        btn.className = "option";
        btn.type = "button";
        btn.setAttribute("aria-label", opt.text);
        btn.onclick = () => {
          questionBox.classList.remove("fade-in");
          optionsBox.classList.remove("fade-in");
          questionBox.classList.add("fade-out");
          optionsBox.classList.add("fade-out");
          backBtn.classList.remove("fade-in");
          backBtn.classList.add("fade-out");

          setTimeout(() => {
            if (Array.isArray(opt.types)) {
              answers[current] = opt.types;
              current++;
              recalculateScore();

              if (current < questions.length) {
                updateProgress();
                showQuestion();
              } else {
                goToResult();
              }
            } else {
              alert("íƒ€ì… ë°ì´í„°ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.");
            }
          }, 400);
        };
        optionsBox.appendChild(btn);
      });

      backBtn.style.display = current > 0 ? "inline-block" : "none";
      updateProgress();
    }

    document.getElementById("back-button").onclick = () => {
      if (current > 0) {
        current--;
        answers.pop();
        recalculateScore();
        showQuestion();
      }
    };

    function goToResult() {
      document.body.classList.add('fade-out');
      setTimeout(() => {
        const sorted = Object.entries(score).sort((a, b) => b[1] - a[1]);
        const resultType = sorted[0][0];
        localStorage.setItem('mbti_result', resultType);
        window.location.href = `result_${resultType}.html`;
      }, 400);
    }
  </script>
</body>
</html>
